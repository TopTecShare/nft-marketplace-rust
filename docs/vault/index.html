<!DOCTYPE html>
<html lang=en >

<head>

  <meta charset=UTF-8>
  
<link rel=apple-touch-icon type=image/png href=https://cpwebassets.codepen.io/assets/favicon/apple-touch-icon-5ae1a0698dcc2402e9712f7d01ed509a57814f994c660df9f7a952f3060705ee.png />
<meta name=apple-mobile-web-app-title content=CodePen>

<link rel=shortcut icon type=image/x-icon href=https://cpwebassets.codepen.io/assets/favicon/favicon-aec34940fbc1a6e787974dcd360f2c6b63348d4b1f4e06c77743096d55480f33.ico />

<link rel=mask-icon type= href=https://cpwebassets.codepen.io/assets/favicon/logo-pin-8f3771b1072e3c38bd662872f6b673a722f4b3ca2421637d5596661b4e2132cc.svg color=#111 />


  <title>CodePen - Mintbase store tokens</title>
  
  
  
  
<style>
@import url(https://fonts.googleapis.com/css?family=Source+Code+Pro);
.json {
  font-family: Source Code Pro, monospace;
  font-size: 16px;
}
.json > .json__item {
  display: block;
}

.json__item {
  display: none;
  margin-top: 10px;
  padding-left: 20px;
  user-select: none;
}

.json__item--collapsible {
  cursor: pointer;
  overflow: hidden;
  position: relative;
}
.json__item--collapsible::before {
  content: +;
  position: absolute;
  left: 5px;
}
.json__item--collapsible::after {
  background-color: lightgrey;
  content: ;
  height: 100%;
  left: 9px;
  position: absolute;
  top: 26px;
  width: 1px;
}
.json__item--collapsible:hover > .json__key, .json__item--collapsible:hover > .json__value {
  text-decoration: underline;
}

.json__toggle {
  display: none;
}
.json__toggle:checked ~ .json__item {
  display: block;
}

.json__key {
  color: darkblue;
  display: inline;
}
.json__key::after {
  content: : ;
}

.json__value {
  display: inline;
}

.json__value--string {
  color: green;
}

.json__value--number {
  color: blue;
}

.json__value--boolean {
  color: red;
}
</style>

  <script>
  window.console = window.console || function(t) {};
</script>

  
  
  <script type=text/javasccript>
  if (document.location.search.match(/type=embed/gi)) {
    window.parent.postMessage(resize, *);
  }
</script>


</head>

<body translate=no >
  <h1>Show all Mintbase store tokens</h1>
<form onsubmit=run(); return false;>
    Store: 
    <input class=store type=textbox value=nearverse>
    <input type=submit value=Submit>
</form>
<div class=target />

  
      <script id=rendered-js >
const run = async () => {
  var store = document.querySelector('.store').value;
fetch("https://mintbase-mainnet.hasura.app/v1/graphql", {
  "headers": {
    "content-type": "application/json",
  },
  "body": "{\"query\":\"query MyQuery {\\n  store(where: {name: {_eq: \\\""+store+"\\\"}}) {\\n    things {\\n      tokens {\\n        id\\n        ownerId\\n      }\\n      metaId\\n    }\\n  }\\n}\",\"variables\":null,\"operationName\":\"MyQuery\"}",
  "method": "POST",
})
.then(response => response.json())
.then(function(response) { 
    var el = document.querySelector('.target');
    el.innerHTML = jsonViewer(response["data"]["store"][0]["things"], true);
  })
};



function jsonViewer(json, collapsible=false) {
    var TEMPLATES = {
        item: '<div class="json__item"><div class="json__key">%KEY%</div><div class="json__value json__value--%TYPE%">%VALUE%</div></div>',
        itemCollapsible: '<label class="json__item json__item--collapsible"><input type="checkbox" class="json__toggle"/><div class="json__key">%KEY%</div><div class="json__value json__value--type-%TYPE%">%VALUE%</div>%CHILDREN%</label>',
        itemCollapsibleOpen: '<label class="json__item json__item--collapsible"><input type="checkbox" checked class="json__toggle"/><div class="json__key">%KEY%</div><div class="json__value json__value--type-%TYPE%">%VALUE%</div>%CHILDREN%</label>'
    };

    function createItem(key, value, type){
        var element = TEMPLATES.item.replace('%KEY%', key);

        if(type == 'string') {
            element = element.replace('%VALUE%', '"' + value + '"');
        } else {
            element = element.replace('%VALUE%', value);
        }

        element = element.replace('%TYPE%', type);

        return element;
    }

    function createCollapsibleItem(key, value, type, children){
        var tpl = 'itemCollapsible';
        
        if(collapsible) {
            tpl = 'itemCollapsibleOpen';
        }
        
        var element = TEMPLATES[tpl].replace('%KEY%', key);

        element = element.replace('%VALUE%', type);
        element = element.replace('%TYPE%', type);
        element = element.replace('%CHILDREN%', children);

        return element;
    }

    function handleChildren(key, value, type) {
        var html = '';

        for(var item in value) { 
            var _key = item,
                _val = value[item];

            html += handleItem(_key, _val);
        }

        return createCollapsibleItem(key, value, type, html);
    }

    function handleItem(key, value) {
        var type = typeof value;

        if(typeof value === 'object') {        
            return handleChildren(key, value, type);
        }

        return createItem(key, value, type);
    }

    function parseObject(obj) {
        _result = '<div class="json">';

        for(var item in obj) { 
            var key = item,
                value = obj[item];

            _result += handleItem(key, value);
        }

        _result += '</div>';

        return _result;
    }
    
    return parseObject(json);
};
    </script>

  

</body>

</html>
